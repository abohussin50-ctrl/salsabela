<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Redirecting...</title>
<script>
(function () {
  const AR_URL = 'salsabela/index.html';
  const EN_URL = 'salsabela-en/index.html';
  const arabCountries = new Set([
    'egypt','saudi arabia','united arab emirates','kuwait','qatar','bahrain',
    'oman','yemen','syria','lebanon','jordan','palestine','iraq','morocco',
    'algeria','tunisia','libya','sudan','mauritania','somalia','comoros','djibouti'
  ]);
  let redirected = false;
  const doRedirect = url => {
    if (!redirected) {
      redirected = true;
      window.location.replace(url);
    }
  };

  // 1️⃣ تحويل فوري مبدئي بناءً على لغة المتصفح
  const lang = (navigator.language || navigator.userLanguage || '').toLowerCase();
  if (lang.startsWith('ar')) {
    doRedirect(AR_URL);
  } else {
    doRedirect(EN_URL);
  }

  // 2️⃣ محاولة فورية ثانوية لاكتشاف البلد (تصحيح الوجهة إذا لزم)
  const controller = new AbortController();
  setTimeout(() => controller.abort(), 300); // مهلة قصيرة جدًا
  fetch('https://ipapi.co/json/', { signal: controller.signal })
    .then(r => r.ok && r.json())
    .then(d => {
      if (!d) return;
      const country = (d.country_name || '').toLowerCase();
      if (arabCountries.has(country)) doRedirect(AR_URL);
      else doRedirect(EN_URL);
    })
    .catch(() => {});
})();
</script>

<style>
  body { display:none; }
</style>
</head>
<body></body>
</html>
